# markdown-courseware

Welcome! This repository contains the Markdown files that make up the CS 61AS course website and textbook.

If you need a refresher on Markdown, see [here](https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet).

Before You Start
----------------
To begin making changes to the website/textbook:

1. Make sure you have Python 2.7 installed. As of right now, Python 3 is not supported.
2. Install the [markdown2](https://github.com/trentm/python-markdown2) module. (If you use pip: `pip install markdown2`.)
3. Clone this repository.
4. Clone [berkeley-cs61as.github.com](https://github.com/berkeley-cs61as/berkeley-cs61as.github.com).

### Contributing Without Git
You can also contribute directly from your browser via GitHub, although you won't be able to propogate your changes to the course website. Simply find the Markdown file you want to change and click the "edit" button.

Basic Workflow
--------------
The basic workflow for editing the website/textbook looks like this:

0. Navigate to this repository.
0. Do a `git pull`.
1. Edit the Markdown files you would like to change.
2. Commit and push your changes.

Then, to update the live website:

2. Run `publish.py` by doing `python publish.py`. This will convert all of the Markdown files to HTML. By default, the resulting HTML files will be placed in `../berkeley-cs61as.github.com`.
3. Navigate to `../berkeley-cs61as.github.com`.
4. Commit and push.
4. Your changes will be instantly visible at http://berkeley-cs61as.github.io.

That's all! If you get stuck, email Allen at allenguo@berkeley.edu.

If you're interested in what `publish.py` does, or you want to make more complicated changes to the textbook, keep reading.

More Complicated Changes
------------------------
### Deleting/Adding Sections
To delete/add sections, simply delete/add Markdown files as needed. Keep in mind:

* Section file names are of the form `section## Title Goes Here.md`, where the `#`s are numerical digits.
* Sections are ordered by number. Feel free to change the numbers of existing sections as needed to get everything in the right order.

### Deleting/Adding Chapters
Deleting/adding chapters is kind of like deleting/adding sections: simply delete/add directories as needed. Keep in mind:

* Chapter directory names are of the form `chapter## Title Goes Here/`, where the `#`s are numerical digits.
* Chapters are ordered by number.

Additionally, you must update the `units` variable in `config.py`, which tells `publish.py` what chapters belong in each unit. `units` should be fairly easy to understand.

### Deleting/Adding Units
Remove/add the appropriate mapping from the `units` variable in `config.py`.

What Does `publish.py` Do?
--------------------------
`publish.py` has several roles:

* Generates a table of contents that includes every chapter and section.
* Converts Markdown files to HTML.
* Inserts the converted content in the appropriate places, as defined by the templates files (see below).
* Writes the final HTML files to the output directory (usually `../berkeley-cs61as.github.com`).

### Templating

Our publishing system includes a very simple templating system similar to what you might see in Templar or Django.

Take a look at `textbook-template.html`. Every page in the textbook uses this template. This template allows the following variables:
* `{{title}}` is the title of the page (i.e., the section title).
* `{{content}}` is the content of the page (converted from Markdown).
* `{{chaptertitle}}` is the title of the parent chapter.
* `{{chaptertoc}}` is the table of contents for the parent chapter.

A similar templating system exists for (non-textbook) pages. The template file is called `page-template.html`.

### Generating Tables of Contents

As stated above, the table of contents for each chapter is generated by `publish.py` and inserted using the templating language. In contrast, the table of contents for each *section* is generated from the front-end using jQuery.

